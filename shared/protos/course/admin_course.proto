syntax = "proto3";

package admin_course;

service AdminCourseService {
    rpc AdminCreateCourse (AdminCreateCourseRequest) returns (AdminCreateCourseResponse);
    rpc AdminGetCourse    (AdminGetCourseRequest)    returns (AdminGetCourseResponse);
    rpc AdminUpdateCourse (AdminUpdateCourseRequest) returns (AdminUpdateCourseResponse);
    rpc AdminDeleteCourse (AdminDeleteCourseRequest) returns (AdminDeleteCourseResponse);
    rpc AdminListCourses  (AdminListCoursesRequest)  returns (AdminListCoursesResponse);
}

//
// VALUE OBJECTS
//

message CoursePrice {
    string type = 1;
    int32 amount = 2;
}

//
// REQUESTS
//

message AdminCreateCourseRequest {
    string title = 1;
    string description = 2;

    string level = 3;
    int32 duration_minutes = 4;
    string language = 5;
    bool requires_experience = 6;

    CoursePrice price = 7;

    repeated string category_ids = 8;
    repeated string mentor_ids = 9;
    string cover_image_id = 10;
    string author_id = 11;
}

message AdminUpdateCourseRequest {
    string id = 1;

    optional string title = 2;
    optional string description = 3;

    optional string level = 4;
    optional int32 duration_minutes = 5;
    optional string language = 6;
    optional bool requires_experience = 7;

    optional CoursePrice price = 8;

    repeated string category_ids = 9;
    repeated string mentor_ids = 10;
}

message AdminGetCourseRequest {
    string id = 1;
}

//
// RESPONSES
//

message AdminCreateCourseResponse {
    string id = 1;
}

message AdminGetCourseResponse {
    string id = 1;
    string title = 2;
    string description = 3;

    string level = 4;
    int32 duration_minutes = 5;
    string language = 6;
    bool requires_experience = 7;

    CoursePrice price = 8;

    repeated string category_ids = 9;
    repeated string mentor_ids = 10;
}

message AdminUpdateCourseResponse {
    string id = 1;
}

message AdminDeleteCourseRequest {
    string id = 1;
}

message AdminDeleteCourseResponse {
    bool success = 1;
}

message AdminListCoursesRequest {
    optional string category_id = 1;
}

message AdminListCoursesResponse {
    repeated AdminGetCourseResponse items = 1;
}
